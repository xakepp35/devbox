Приветствую, коллеги!

Мы собираем инициативные группы - взаимозаменяемые команды для быстрой развёртки **dev-песочницы** — простой, надёжной и воспроизводимой среды для разработки. Скоро нам выделят набор машин; цель — сделать инфраструктуру, в которой **любая новая команда сможет за десятки минут поднять k8s-среду, CI/CD, таск-трекер и registry**, а при падении — восстановить всё по инструкции в ~15 минут. Это не выделенная команда девопс, а скорее ротируемая волонтёрная инициатива: бекендеры, фронтендеры, ML-инженеры — помогаете по желанию/возможности, чтобы через обучение все могли поддерживать стек.

## Почему это важно

* Быстрое воспроизведение среды даёт независимость от «бутылочных» людей и ускоряет on-boarding.
* Простые инструменты (docker-compose / минимальные скрипты) — чтобы любой мог понять и запустить стоп-слова.
* Ежедневные бэкапы в MinIO по cron — чтобы при любом фэйлуре данные и артефакты были в безопасности.
* Документированное restore — чтобы пол-этажа знало, как восстановить систему.

## Что мы будем делать

* Поднимаем отдельные сервисы в compose-стеке: **GitLab (с отдельной БД и Redis + бэкап в MinIO)**, **Nexus**, **OpenProject** и т.д.
* Отдельно разворачиваем **MinIO** как центр бэкапов (`backup.dev.box`) и простой backup-runner с `mc` для загрузки дампов.
* Поднимаем **microk8s** (несколько нод) под dev-неймспейсы, туда ставим раннеры GitLab, dev-сервисы (postgres/kafka/minio и т.п.).
* Делаем «one-click» шаблоны (compose snippets + CI jobs) для быстрого provision/teardown окружений.
* Строгий RBAC: критичные сервисы (GitLab/Jenkins/Nexus/OpenProject/MinIO) — на выделенных нодах/VM, в докер композе, dev-кластер — отдельный пул.

## Как мы разделимся (малые кросс-функциональные команды)

1. **Команда GitLab** — установка omnibus (Postgres/Redis отдельно), CI runners, CI templates, backup→MinIO.
2. **Команда Nexus** — настройка docker/maven/npm репозитория, права для CI, backup.
3. **Команда Kubernetes** — установка microk8s, Ingress/MetalLB, storageclass (NFS или Longhorn для dev), регистрация runners.
4. **Команда MinIO/Backup** — развёртывание backup.dev.box, настрой mc, скрипты upload/restore, lifecycle/retention.
5. **Команда OpenProject + порталы** — поднимут таск-трекер и доп. сервисы (календарь, портал), подготовят restore сценарии.
6. **Security/Network** — VPN/WireGuard, internal DNS (например `*.dev.dev.box`), TLS (certs), базовый RBAC.
   (Каждая команда — 2–3 человека; роли гибкие)

## Ключевые принципы работы

* **Простота>сложность**: compose + скрипты вместо многослойных orchestration, но все готово к миграции в k8s/helm.
* **Идемпотентность**: все конфиги/скрипты — idempotent, развёртываются повторно без сюрпризов.
* **Бэкап и тест восстановления**: ежедневные бэкапы + ежемесячный тест restore в тестовом окружении.
* **Документация**: каждый шаг (install, backup, restore, upgrade) — записан в README; runbook — под рукой.
* **Минимум привилегий**: devs — доступ по namespace; права на infra = ограничены.

## План на ближайшую неделю

* Сегодня приняли отмашку
* Завтра в 14:00–15:00 встречаемся коротко: смотрим compose-файлы, разбираем концепты — кто куда ставит GitLab/Nexus/MinIO/k8s, распределяем первые таски. Пробуем поднимать compose локально.
* В течение 3 рабочих дней: получаем доступ к машинам, поднять MinIO + тест upload/download; поднять GitLab и сделать первый backup→MinIO; поднять Nexus и создать docker hosted repo.
* Дальше: поднять microk8s, зарегать runners, сделать первый CI → dev deploy.
* На 7-й день — тест восстановления, инцидентные учения - намеренно рушим среду, восстанавливаем из бэкапа на тестовой VM по runbook’у. замеряем время.

## Критерии успеха первой итерации

* GitLab доступен и делает backup в MinIO автоматически.
* Nexus принимает docker push от CI.
* microk8s + gitlab runners могут билдить и деплоить тестовый сервис в `my-project-dev`.
* Есть записанный runbook восстановления GitLab и Nexus, который прошёл dry-run.

## Организационные моменты

* Сбор — пятница 14:00–15:00 (онлайн/офис).
* Канал для оперативной коммуникации — в Telegram + пожже сделаем резерв MM/TeamSpeak.
* Все изменения в infra — через ПР [github.com/xakepp35/devbox](https://github.com/xakepp35/devbox). Бренчи именуйте `gitlab/make-it-work`, Коммиты подписывайте нормальными сообщениями.

Заключение
Мы делаем не просто набор контейнеров — мы делаем **повторяемую, понятную и восстанавливаемую платформу**, чтобы любой новичок мог взять и поднять среду, а в кризисном сценарии восстановить её за 15 минут по runbook'у. Это обучение и прокачка команды — волонтёрная, но крайне полезная. Иван — ты у нас главный по антикризису, всё, что нужно — кидайте задачи и начинаем.

Жду от вас подтверждений команд и списка людей. Завтра в 14:00 собираемся — покажу compose-файлы и первый минимальный pipeline, начнём разбираться. Поехали, руки в дело.
